<script>
    const deviceID = <%= deviceID %>
    const changeModeIdle = () => {
        $.post('/api/dashboard/' + deviceID + '/status', {action: 'idle'});
        setTimeout(document.location.reload(), 1000);
    };
    const changeModeSurveillance = () => {
        $.post('/api/dashboard/' + deviceID + '/status', {action: 'surveillance'});
        setTimeout(document.location.reload(), 1000);
    };
    const changeModeIntense = () => {
        $.post('/api/dashboard/' + deviceID + '/status', {action: 'intense'});
        setTimeout(document.location.reload(), 1000);
    };

    const reportCase = () => {
        $.post('/api/dashboard/' + deviceID + '/report', (data, status) => {
          if (data.code === 400) {
            alert('There is already an ongoing case for this vehicle.')
          } else {
            alert(`Case created for: \nVehicle: ${data.vehicleName}\nPlate Number: ${data.licensePlate}\nCase ID: ${data.id}`);
          };
        })
    };
</script>